

## Задача: интеграция Uniswap V2 коннектора в основной поток данных

1. **Инвентаризация скрипта**
   - Разобрать `test_scripts/uniswap/v2/connect_uniswap_v2.go`: как формируются подписки, какой формат данных и где лежат зависимости.
   - Зафиксировать отличия от текущей архитектуры core (структуры MarketData, обработка ошибок, логирование).

2. **Проектирование пакета коннектора**
   - Решить, куда поместить код (например, `internal/exchange/uniswapv2`).
   - Определить интерфейс, совместимый с существующим пайплайном (методы `Connect`, `Subscribe`, `ReadLoop`).

3. **Рефакторинг скрипта в библиотеку**
   - Вынести сетевую логику WS, парсинг и нормализацию цен из тестового скрипта в новый пакет.
   - Покрыть разбор входящих событий конвертацией в `pb.MarketData`.

4. **Конфигурационная поддержка**
   - Расширить `configs/screener-core.yaml` и `internal/config` для описания DEX-коннекторов (цепь, RPC/WS endpoint, список пулов).
   - Продумать формат символов: как хранить адреса пар, как мапить на канонический тикер.

5. **Интеграция в `cmd/screener-core`**
   - Добавить запуск нового коннектора в супервизор, подключить к общему `dataChannel`.
   - Обеспечить reuse пайплайна Redis (ключи `price` / `price_canon`) для DEX потоков.

6. **Тестирование и проверки**
   - Написать минимальные unit / integration тесты для парсинга и нормализации Uniswap V2.
   - Прогнать end-to-end: запуск `scripts/start_all.sh` с активным DEX коннектором, проверка записей в Redis.

7. **Документация и операционные скрипты**
   - Обновить `docs/project_documentation.md` и `README.md` с описанием нового источника данных.
   - При необходимости скорректировать `scripts/start_all.sh`/`stop_all.sh` и статусные утилиты для отображения DEX потоков.
