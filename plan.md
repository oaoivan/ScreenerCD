## Задача: factory/registry для запуска коннекторов

1. **Анализ текущего запуска**
   - Зафиксировать в `cmd/screener-core/main.go`, как сейчас стартуют CEX/Dex коннекторы, какие параметры повторяются.
   - Составить список зависимостей (конфиг, символы, супервизор, каналы, pricer).

2. **Дизайн фабрики/реестра**
   - Определить интерфейс реестра: `type ConnectorBuilder func(ctx launchContext) error` и структуру `launchContext` (config slice, pricer, dataChannel, stop-chan).
   - Решить формат ключей (`exchange`, `dex:name`) и стратегию регистрации (init-функции пакетов или ручной список).

3. **Выделение контекста**
   - Сформировать `launchContext` (претворять существующие переменные в структуру/DTO), чтобы передавать общие параметры без глобалов.
   - Убедиться, что pricer/Redis/каналы и тулзы доступны внутри билдера.

4. **Реализация реестра**
   - Создать пакет `internal/launcher` или файл рядом, содержащий мапу `map[string]ConnectorBuilder` и функции `Register/LaunchAll`.
   - Добавить регистрацию для существующих CEX коннекторов (Bybit/Gate/Bitget/OKX) и DEX (`uniswap_v2`, `uniswap_v3`).

5. **Миграция main.go**
   - Заменить ручной `switch` на цикл по конфигу, вызывающий фабрику.
   - Обновить запись метрик `perExchange`: получать имя из билдера вместо жёстких строк.

6. **Валидация**
   - `go build ./cmd/screener-core` / таргетные тесты пакетов.
   - Прогнать `scripts/start_all.sh` локально, проверить лог `perExchange`, подписки, ошибки.

7. **Документация**
   - Обновить `docs/project_documentation.md` / README: описать reigstry-подход и как добавлять новый коннектор.

---

